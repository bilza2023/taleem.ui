import{s as L,n as G,k as fe,o as ie}from"../chunks/scheduler.k9AsmmqN.js";import{S as M,i as U,h as v,j as E,k as I,f as h,l as w,d as _,n as B,t as $,A as O,y as H,e as x,C as W,c as D,s as C,a as S,b as y,m as T,g as V,r as Q,x as J,u as R,q as ce,v as z,D as ue,E as he}from"../chunks/index.16X8BF3e.js";/* empty css                                                    */import{t as K}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.tzopxu9Y.js";import"../chunks/entry.aNP1WN7T.js";import{A as me}from"../chunks/config.P5edGPc2.js";import{I as oe}from"../chunks/icons.s_L1VXoT.js";import{a as de}from"../chunks/ajaxPost.LQLWhdZh.js";import{H as _e}from"../chunks/NavBtn.vBjdeleK.js";import{P as pe}from"../chunks/PageWrapper.kfEPS4UO.js";import{N as ge}from"../chunks/Nav.L6Y8riix.js";import{e as j}from"../chunks/each.NS6M4lSo.js";import{C as be}from"../chunks/Card.NmYNO6UJ.js";import{f as X}from"../chunks/index.WdP0tWe1.js";function ve(){const n=localStorage.getItem("token");return!(!n||n==""||n==null)}function Ee(){const n=localStorage.getItem("teacher_status");return!n||n==""||n==null?!1:n=="admin"}function Y(n,e,r){const s=n.slice();return s[2]=e[r],s[4]=r,s}function Z(n){let e,r,s,i;return r=new be({props:{title:ee(n[2]),icon:oe.TEST,url:`/player?tcode=${n[0]}&id=${n[2]._id}`}}),{c(){e=v("div"),D(r.$$.fragment),s=C(),this.h()},l(t){e=E(t,"DIV",{class:!0});var c=I(e);S(r.$$.fragment,c),s=y(c),c.forEach(h),this.h()},h(){w(e,"class","w-3/12")},m(t,c){_(t,e,c),T(r,e,null),B(e,s),i=!0},p(t,c){const l={};c&2&&(l.title=ee(t[2])),c&3&&(l.url=`/player?tcode=${t[0]}&id=${t[2]._id}`),r.$set(l)},i(t){i||($(r.$$.fragment,t),i=!0)},o(t){x(r.$$.fragment,t),i=!1},d(t){t&&h(e),V(r)}}}function $e(n){let e,r,s,i=j(n[1]),t=[];for(let l=0;l<i.length;l+=1)t[l]=Z(Y(n,i,l));const c=l=>x(t[l],1,1,()=>{t[l]=null});return{c(){e=v("div"),r=v("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=E(l,"DIV",{class:!0});var a=I(e);r=E(a,"DIV",{class:!0});var f=I(r);for(let o=0;o<t.length;o+=1)t[o].l(f);f.forEach(h),a.forEach(h),this.h()},h(){w(r,"class","flex w-full justify-center flex-wrap "),w(e,"class","bg-gray-700 p-2 m-2 rounded-md")},m(l,a){_(l,e,a),B(e,r);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(r,null);s=!0},p(l,[a]){if(a&3){i=j(l[1]);let f;for(f=0;f<i.length;f+=1){const o=Y(l,i,f);t[f]?(t[f].p(o,a),$(t[f],1)):(t[f]=Z(o),t[f].c(),$(t[f],1),t[f].m(r,null))}for(O(),f=i.length;f<t.length;f+=1)c(f);H()}},i(l){if(!s){for(let a=0;a<i.length;a+=1)$(t[a]);s=!0}},o(l){t=t.filter(Boolean);for(let a=0;a<t.length;a+=1)x(t[a]);s=!1},d(l){l&&h(e),W(t,l)}}}function ee(n){if(n.name&&n.name!=="")return`${n.name} `;{let e=`Ex ${n.exercise} Q-${n.questionNo}`;return(n.part||n.part!=0)&&(e+=` pt ${n.part}`),e}}function ke(n,e,r){let{tcode:s}=e,{selectedQuestions:i}=e;return n.$$set=t=>{"tcode"in t&&r(0,s=t.tcode),"selectedQuestions"in t&&r(1,i=t.selectedQuestions)},[s,i]}class we extends M{constructor(e){super(),U(this,e,ke,$e,L,{tcode:0,selectedQuestions:1})}}function te(n,e,r){const s=n.slice();return s[7]=e[r],s}function se(n,e,r){const s=n.slice();return s[10]=e[r],s}function re(n){let e,r,s,i,t,c=j(n[7].exercises),l=[];for(let a=0;a<c.length;a+=1)l[a]=le(se(n,c,a));return{c(){e=v("div");for(let a=0;a<l.length;a+=1)l[a].c();r=C(),this.h()},l(a){e=E(a,"DIV",{class:!0});var f=I(e);for(let o=0;o<l.length;o+=1)l[o].l(f);r=y(f),f.forEach(h),this.h()},h(){w(e,"class","bg-stone-600 p-2 rounded-md flex flex-col")},m(a,f){_(a,e,f);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);B(e,r),t=!0},p(a,f){if(f&25){c=j(a[7].exercises);let o;for(o=0;o<c.length;o+=1){const m=se(a,c,o);l[o]?l[o].p(m,f):(l[o]=le(m),l[o].c(),l[o].m(e,r))}for(;o<l.length;o+=1)l[o].d(1);l.length=c.length}},i(a){t||(a&&fe(()=>{t&&(i&&i.end(1),s=ue(e,X,{duration:400}),s.start())}),t=!0)},o(a){s&&s.invalidate(),a&&(i=he(e,X,{duration:1e3})),t=!1},d(a){a&&h(e),W(l,a),a&&i&&i.end()}}}function le(n){let e,r,s=n[10]+"",i,t,c,l;function a(){return n[6](n[10])}return{c(){e=v("button"),r=Q("Ex: "),i=Q(s),this.h()},l(f){e=E(f,"BUTTON",{class:!0});var o=I(e);r=R(o,"Ex: "),i=R(o,s),o.forEach(h),this.h()},h(){w(e,"class",t=`p-1 m-1 rounded-lg  px-2 mx-6 ${n[3]==n[10]?"bg-gray-800 text-red-600":"bg-gray-400"}`)},m(f,o){_(f,e,o),B(e,r),B(e,i),c||(l=ce(e,"click",a),c=!0)},p(f,o){n=f,o&1&&s!==(s=n[10]+"")&&z(i,s),o&9&&t!==(t=`p-1 m-1 rounded-lg  px-2 mx-6 ${n[3]==n[10]?"bg-gray-800 text-red-600":"bg-gray-400"}`)&&w(e,"class",t)},d(f){f&&h(e),c=!1,l()}}}function ne(n){let e,r,s=n[7].chapter+"",i,t,c,l,a,f;function o(){return n[5](n[7])}let m=n[7].chapter==n[2]&&re(n);return{c(){e=v("button"),r=Q("Chapter: "),i=Q(s),c=C(),m&&m.c(),l=J(),this.h()},l(d){e=E(d,"BUTTON",{class:!0});var p=I(e);r=R(p,"Chapter: "),i=R(p,s),p.forEach(h),c=y(d),m&&m.l(d),l=J(),this.h()},h(){w(e,"class",t=`p-1 m-1 rounded-lg  px-2 ${n[2]==n[7].chapter?"bg-stone-600 text-red-600":"bg-gray-700"}`)},m(d,p){_(d,e,p),B(e,r),B(e,i),_(d,c,p),m&&m.m(d,p),_(d,l,p),a||(f=ce(e,"click",o),a=!0)},p(d,p){n=d,p&1&&s!==(s=n[7].chapter+"")&&z(i,s),p&5&&t!==(t=`p-1 m-1 rounded-lg  px-2 ${n[2]==n[7].chapter?"bg-stone-600 text-red-600":"bg-gray-700"}`)&&w(e,"class",t),n[7].chapter==n[2]?m?(m.p(n,p),p&5&&$(m,1)):(m=re(n),m.c(),$(m,1),m.m(l.parentNode,l)):m&&(O(),x(m,1,1,()=>{m=null}),H())},d(d){d&&(h(e),h(c),h(l)),m&&m.d(d),a=!1,f()}}}function Ce(n){let e,r,s=j(n[0]),i=[];for(let t=0;t<s.length;t+=1)i[t]=ne(te(n,s,t));return{c(){e=v("div"),r=v("div");for(let t=0;t<i.length;t+=1)i[t].c();this.h()},l(t){e=E(t,"DIV",{class:!0});var c=I(e);r=E(c,"DIV",{class:!0});var l=I(r);for(let a=0;a<i.length;a+=1)i[a].l(l);l.forEach(h),c.forEach(h),this.h()},h(){w(r,"class","flex flex-col justify-center w-full flex-wrap "),w(e,"class","p-4 m-1 border-2 border-white rounded-lg max-h-[500px] overflow-y-auto")},m(t,c){_(t,e,c),B(e,r);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(r,null)},p(t,[c]){if(c&31){s=j(t[0]);let l;for(l=0;l<s.length;l+=1){const a=te(t,s,l);i[l]?i[l].p(a,c):(i[l]=ne(a),i[l].c(),i[l].m(r,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=s.length}},i:G,o:G,d(t){t&&h(e),W(i,t)}}}function ye(n,e,r){let{chapter_map_array:s}=e,{setChapter:i}=e,{selectedChapter:t}=e,{selectedEx:c}=e,{setEx:l}=e;const a=o=>i(o.chapter),f=o=>l(o);return n.$$set=o=>{"chapter_map_array"in o&&r(0,s=o.chapter_map_array),"setChapter"in o&&r(1,i=o.setChapter),"selectedChapter"in o&&r(2,t=o.selectedChapter),"selectedEx"in o&&r(3,c=o.selectedEx),"setEx"in o&&r(4,l=o.setEx)},[s,i,t,c,l,a,f]}class Ie extends M{constructor(e){super(),U(this,e,ye,Ce,L,{chapter_map_array:0,setChapter:1,selectedChapter:2,selectedEx:3,setEx:4})}}async function xe(n){const e=[],r=[];for(const s of n)r.includes(s.chapter)||r.push(s.chapter);r.sort((s,i)=>s-i);for(let s=0;s<r.length;s++){const i=r[s];e.push({chapter:i,exercises:[]})}for(let s=0;s<e.length;s++){const i=e[s].chapter;for(let t=0;t<n.length;t++){const c=n[t];c.chapter==i&&(e[s].exercises.includes(c.exercise)||e[s].exercises.push(c.exercise))}}return e}function Be(n){let e,r,s,i,t,c,l;return s=new Ie({props:{chapter_map_array:n[4],setChapter:n[5],selectedChapter:n[3],selectedEx:n[2],setEx:n[6]}}),c=new we({props:{selectedQuestions:n[1],tcode:n[0]}}),{c(){e=v("div"),r=v("div"),D(s.$$.fragment),i=C(),t=v("div"),D(c.$$.fragment),this.h()},l(a){e=E(a,"DIV",{class:!0});var f=I(e);r=E(f,"DIV",{class:!0});var o=I(r);S(s.$$.fragment,o),o.forEach(h),i=y(f),t=E(f,"DIV",{class:!0});var m=I(t);S(c.$$.fragment,m),m.forEach(h),f.forEach(h),this.h()},h(){w(r,"class","w-2/12"),w(t,"class","w-10/12"),w(e,"class","flex")},m(a,f){_(a,e,f),B(e,r),T(s,r,null),B(e,i),B(e,t),T(c,t,null),l=!0},p(a,[f]){const o={};f&16&&(o.chapter_map_array=a[4]),f&8&&(o.selectedChapter=a[3]),f&4&&(o.selectedEx=a[2]),s.$set(o);const m={};f&2&&(m.selectedQuestions=a[1]),f&1&&(m.tcode=a[0]),c.$set(m)},i(a){l||($(s.$$.fragment,a),$(c.$$.fragment,a),l=!0)},o(a){x(s.$$.fragment,a),x(c.$$.fragment,a),l=!1},d(a){a&&h(e),V(s),V(c)}}}function De(n,e,r){let{questions:s}=e,{tcode:i}=e,{uiMode:t=!0}=e,c=[],l="1.1",a=1,f=[];function o(d){r(3,a=d);for(let p=0;p<f.length;p++){const k=f[p];if(k.chapter==a&&k.exercises.length>0){r(2,l=k.exercises[0]),m(l);return}}}function m(d){r(2,l=d),r(1,c=[]);for(let p=0;p<s.length;p++){const k=s[p];k.chapter===a&&k.exercise===l&&(t?k.status=="final"&&c.push(k):c.push(k))}}return ie(async()=>{r(4,f=await xe(s)),o(f[0].chapter)}),n.$$set=d=>{"questions"in d&&r(7,s=d.questions),"tcode"in d&&r(0,i=d.tcode),"uiMode"in d&&r(8,t=d.uiMode)},[i,c,l,a,f,o,m,s,t]}class Se extends M{constructor(e){super(),U(this,e,De,Be,L,{questions:7,tcode:0,uiMode:8})}}function Te(n){let e;return{c(){e=Q(n[0])},l(r){e=R(r,n[0])},m(r,s){_(r,e,s)},p(r,s){s&1&&z(e,r[0])},d(r){r&&h(e)}}}function ae(n){let e,r;return e=new Se({props:{questions:n[1],tcode:n[0]}}),{c(){D(e.$$.fragment)},l(s){S(e.$$.fragment,s)},m(s,i){T(e,s,i),r=!0},p(s,i){const t={};i&2&&(t.questions=s[1]),i&1&&(t.tcode=s[0]),e.$set(t)},i(s){r||($(e.$$.fragment,s),r=!0)},o(s){x(e.$$.fragment,s),r=!1},d(s){V(e,s)}}}function Ve(n){let e,r,s,i,t,c,l,a,f,o,m,d,p,k,q,A,N,P;r=new _e({props:{bgColor:"bg-stone-600",icon:oe.TEST,$$slots:{default:[Te]},$$scope:{ctx:n}}});let b=n[1]&&ae(n);return{c(){e=v("div"),D(r.$$.fragment),s=C(),b&&b.c(),i=C(),t=v("br"),c=C(),l=v("br"),a=C(),f=v("br"),o=C(),m=v("br"),d=C(),p=v("br"),k=C(),q=v("br"),A=C(),N=v("br"),this.h()},l(u){e=E(u,"DIV",{class:!0});var g=I(e);S(r.$$.fragment,g),g.forEach(h),s=y(u),b&&b.l(u),i=y(u),t=E(u,"BR",{}),c=y(u),l=E(u,"BR",{}),a=y(u),f=E(u,"BR",{}),o=y(u),m=E(u,"BR",{}),d=y(u),p=E(u,"BR",{}),k=y(u),q=E(u,"BR",{}),A=y(u),N=E(u,"BR",{}),this.h()},h(){w(e,"class","flex justify-center p-2 ")},m(u,g){_(u,e,g),T(r,e,null),_(u,s,g),b&&b.m(u,g),_(u,i,g),_(u,t,g),_(u,c,g),_(u,l,g),_(u,a,g),_(u,f,g),_(u,o,g),_(u,m,g),_(u,d,g),_(u,p,g),_(u,k,g),_(u,q,g),_(u,A,g),_(u,N,g),P=!0},p(u,g){const F={};g&17&&(F.$$scope={dirty:g,ctx:u}),r.$set(F),u[1]?b?(b.p(u,g),g&2&&$(b,1)):(b=ae(u),b.c(),$(b,1),b.m(i.parentNode,i)):b&&(O(),x(b,1,1,()=>{b=null}),H())},i(u){P||($(r.$$.fragment,u),$(b),P=!0)},o(u){x(r.$$.fragment,u),x(b),P=!1},d(u){u&&(h(e),h(s),h(i),h(t),h(c),h(l),h(a),h(f),h(o),h(m),h(d),h(p),h(k),h(q),h(A),h(N)),V(r),b&&b.d(u)}}}function je(n){let e,r,s,i;return e=new ge({props:{isAdmin:n[3],isLogin:n[2]}}),s=new pe({props:{$$slots:{default:[Ve]},$$scope:{ctx:n}}}),{c(){D(e.$$.fragment),r=C(),D(s.$$.fragment)},l(t){S(e.$$.fragment,t),r=y(t),S(s.$$.fragment,t)},m(t,c){T(e,t,c),_(t,r,c),T(s,t,c),i=!0},p(t,[c]){const l={};c&8&&(l.isAdmin=t[3]),c&4&&(l.isLogin=t[2]),e.$set(l);const a={};c&19&&(a.$$scope={dirty:c,ctx:t}),s.$set(a)},i(t){i||($(e.$$.fragment,t),$(s.$$.fragment,t),i=!0)},o(t){x(e.$$.fragment,t),x(s.$$.fragment,t),i=!1},d(t){t&&h(r),V(e,t),V(s,t)}}}function Qe(n,e,r){let s,i,t=!1,c=!1;return ie(async()=>{try{r(0,s=new URLSearchParams(location.search).get("tcode"));const l=await de(`${me}/command`,{command:"getSyllabus",tcode:s});if(l){const a=await l.json();r(1,i=a.data.syllabus),r(2,t=ve()),r(3,c=Ee())}else{const a=await l.json();chapter_map_array=await chapter_map(i),K.push(a.message)}}catch{K.push("System error")}}),[s,i,t,c]}class Je extends M{constructor(e){super(),U(this,e,Qe,je,L,{})}}export{Je as component};
